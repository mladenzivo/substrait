%YAML 1.2
---
scalar_functions:
  -
    name: "add"
    description: "Add two values."
    impls:
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i8
          - value: i8
        return: i8
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i16
          - value: i16
        return: i16
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i32
          - value: i32
        return: i32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i64
          - value: i64
        return: i64
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp32
          - value: fp32
        return: fp32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp64
          - value: fp64
        return: fp64
  -
    name: "subtract"
    description: "Subtract one value from another."
    impls:
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i8
          - value: i8
        return: i8
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i16
          - value: i16
        return: i16
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i32
          - value: i32
        return: i32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i64
          - value: i64
        return: i64
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp32
          - value: fp32
        return: fp32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp64
          - value: fp64
        return: fp64
  -
    name: "multiply"
    description: "Multiply two values."
    impls:
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i8
          - value: i8
        return: i8
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i16
          - value: i16
        return: i16
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i32
          - value: i32
        return: i32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i64
          - value: i64
        return: i64
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp32
          - value: fp32
        return: fp32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp64
          - value: fp64
        return: fp64
  -
    name: "divide"
    description: "Divide one value by another. Partial values are truncated."
    impls:
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i8
          - value: i8
        return: i8
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i16
          - value: i16
        return: i16
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i32
          - value: i32
        return: i32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i64
          - value: i64
        return: i64
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp32
          - value: fp32
        return: fp32
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp64
          - value: fp64
        return: fp64
  -
    name: "modulus"
    description: "Get the remainder when dividing one value by another."
    impls:
      - args:
          - value: i8
          - value: i8
        return: i8
      - args:
          - value: i16
          - value: i16
        return: i16
      - args:
          - value: i32
          - value: i32
        return: i32
      - args:
          - value: i64
          - value: i64
        return: i64
aggregate_functions:
  - name: "sum"
    description: Sum a set of values.
    impls:
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i8
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64?
        return: i64?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i16
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64?
        return: i64?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64?
        return: i64?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64?
        return: i64?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: fp64?
        return: fp64?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: fp64?
        return: fp64?
  - name: "avg"
    description: Average a set of values. For integral types, this truncates partial values.
    impls:
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i8
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: "STRUCT<i64,i64>"
        return: i8?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i16
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: "STRUCT<i64,i64>"
        return: i16?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: "STRUCT<i64,i64>"
        return: i32?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: i64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: "STRUCT<i64,i64>"
        return: i64?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: "STRUCT<fp64,i64>"
        return: fp32?
      - args:
          - options: [ SILENT, SATURATE, ERROR ]
            required: false
          - value: fp64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: "STRUCT<fp64,i64>"
        return: fp64?
  - name: "min"
    description: Min a set of values.
    impls:
      - args:
          - value: i8
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i8?
        return: i8?
      - args:
          - value: i16
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i16?
        return: i16?
      - args:
          - value: i32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i32?
        return: i32?
      - args:
          - value: i64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64?
        return: i64?
      - args:
          - value: fp32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: fp32?
        return: fp32?
      - args:
          - value: fp64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: fp64?
        return: fp64?
  - name: "max"
    description: Max a set of values.
    impls:
      - args:
          - value: i8
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i8?
        return: i8?
      - args:
          - value: i16
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i16?
        return: i16?
      - args:
          - value: i32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i32?
        return: i32?
      - args:
          - value: i64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64?
        return: i64?
      - args:
          - value: fp32
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: fp32?
        return: fp32?
      - args:
          - value: fp64
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: fp64?
        return: fp64?
window_functions:
  - name: "row_number"
    description: "the number of the current row within its partition."
    impls:
      - args: []
        nullability: DECLARED_OUTPUT
        decomposable: NONE
        return: i64?
        window_type: PARTITION
  - name: "rank"
    description: "the rank of the current row, with gaps."
    impls:
      - args: []
        nullability: DECLARED_OUTPUT
        decomposable: NONE
        return: i64?
        window_type: PARTITION
  - name: "dense_rank"
    description: "the rank of the current row, without gaps."
    impls:
      - args: []
        nullability: DECLARED_OUTPUT
        decomposable: NONE
        return: i64?
        window_type: PARTITION
  - name: "percent_rank"
    description: "the relative rank of the current row."
    impls:
      - args: []
        nullability: DECLARED_OUTPUT
        decomposable: NONE
        return: fp64?
        window_type: PARTITION
  - name: "cume_dist"
    description: "the cumulative distribution."
    impls:
      - args: []
        nullability: DECLARED_OUTPUT
        decomposable: NONE
        return: fp64?
        window_type: PARTITION
  - name: "ntile"
    description: "Return an integer ranging from 1 to the argument value,dividing the partition as equally as possible."
    impls:
      - args:
          - value: i32
        nullability: DECLARED_OUTPUT  
        decomposable: NONE
        return: i32?
        window_type: PARTITION
      - args:
          - value: i64
        nullability: DECLARED_OUTPUT  
        decomposable: NONE
        return: i64?
        window_type: PARTITION
